trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

jobs:
# - job: 'PrivateWindows'
#   pool:
#     name: 'Self-hosted pool'
#     demands:
#     - Agent.Name -equals Agent 2
#   steps:
#   - template: ci/template.yml

- job: WindowsContainer
  container: ubuntu:latest
  steps:
  - task: Bash@3
    inputs:
      targetType: 'inline'
      script: |
        # Update the list of packages
        sudo apt-get update
        # Install pre-requisite packages.
        sudo apt-get install -y wget apt-transport-https software-properties-common
        # Download the Microsoft repository GPG keys
        wget -q https://packages.microsoft.com/config/ubuntu/16.04/packages-microsoft-prod.deb
        # Register the Microsoft repository GPG keys
        sudo dpkg -i packages-microsoft-prod.deb
        # Update the list of packages after we added packages.microsoft.com
        sudo apt-get update
        # Install PowerShell
        sudo apt-get install -y powershell
        # Start PowerShell
        pwsh
  - task: PowerShell@2
    displayName: Clone BuildTools repo
    inputs:
      targetType: 'inline'
      script: >
          Set-Location -Path $($env:BUILD_SOURCEDIRECTORY)
          & git clone -b master --depth 1 "https://github.com/s1ntaxe770r/SSH-dockerfile" BuildTools
      showWarnings: true
      pwsh: true
      workingDirectory: '$(Build.SourcesDirectory)'
  # - template: ci/template.yml

# - job: 'HostedMacOS'
#   pool:
#     vmImage: macOS-latest
#   #condition: and(succeeded())
#   steps:
#   - template: ci/template.yml

# - job: 'HostedUbuntu'
#   pool:
#     vmImage: ubuntu-latest
#   #condition: and(succeeded())
#   steps:
#   - template: ci/template.yml